# -*- mode: shell-script -*-


src_file=../src/lib/libcommon.sh

prefix_cmd="
. /etc/shlib

source '$src_file'
"


##
## trap_add
##

try "trap_add EXIT echo 'exited'; echo 'hop'; exit 0"
noerror
is out "hop
exited
"


try "trap_add INT echo 'exited'; echo 'hop'; exit 0"
noerror
is out "hop
"

## First in First out
try "trap_add EXIT,INT echo 'exit/int'
trap_add EXIT echo 'exit'
echo 'hop'"
try "trap_add EXIT,,,,INT echo 'exit/int'
echo hop" 'support empty sigs'
noerror
is out "\
hop
exit/int
"

noerror
is out "hop
exit/int
exit
"
